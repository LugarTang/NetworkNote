网络中发包有以下情况：

0. 发，啥也不管。

   E.g. 数据ack。

1. 发了，专门等着（blocking）收这个的ack。一段时间没收到，重发。

   E.g. 发送关闭连接的请求。

2. 发了，继续开着收的（blocking），一段时间没收到，ok。还收到，重发。

   E.g. 发送关闭连接的ack。

3. 发了，记录要收什么（non-blocking）。

# 

unix network program

W. Richard Stevens





Internet/internet specific v. s. general



virus/worm former need explicit user interaction



what andy(intel - hardware) gives, bill(microsoft - software) takes away

# 

Mac address points to network card

ip can change: denotes the property of net

无论分组交换还是电路交换，网络核心提供2个功能
功能1:路由
全局操作:确定数据分组从源到目标所使用的路径需要路由协议和路由算法，产生路由表
功能2:转发
本地操作: 路由器或交换机将接收到的数据分组转发出去 (即移动到该设备的某个输出接口)确定转发出去的接口/链路:根据从“入接口”收到分组头中的目的地址，查找本地路由表，确定出接口”

statistical multiplexing



如果某段链路上，分组到达速率超过链路传输速率
分组在一个缓冲区中排队，等到链路可用
若队列被填满，后续分组就被丢弃 -> 丢包



除了分组转发，网络核心还有另一种移动数据的方式
先呼叫建立连接，实现端到端的资源预留
预留的资源包括
链路带宽资源
交换机的交换能力
电路交换连接建立后，物理通路被通信双方独占，资源
专用，即使空闲也不与其他连接共享
由于建立连接并预留资源，因此传输性能好
但如果传输中发生设备故障，则传输被中断



电路交换的多路复用
频分多路复用FDM
时分多路复用TDM
在每一路上实现具有和专用链路类似的性能
该路资源专用，即使空闲也不与其他连接共享



分组交换：

缺点1:分组交换容易拥塞，引起排排队延迟甚至丢包
需要设计可靠性机制与拥塞控制机制
缺点2:分组交换无法提供类似电路交换的服务
语音、视频、游戏等服务需要带宽保障
折中方法:虚电路
·用分组模拟电路交换行为
。自身开销大，性能难以保证(与正常的分组交换数据竞争带宽
目前仍然没有公认解决方案



服务：

面向连接的网络服务
面向连接:传输数据之前，先建立对话连接

类比打电话



无连接：类比发快递

包转发率：线速转发



时延(Delay)
时延(delay 或latency)是指数据(一个报文或分组)从网络(或链路)的一端传送到另一端所需的时间，也称为延迟
传输时延(transmission delay): 数据从结点进入到传输媒体所需要的时间，传输时延又称为发送时延
传播时延(propagation delay): 电磁波在信道中需要传播一定距离而花费的时间
处理时延(processing delay): 主机或路由器在收到分组时，为处理分组(例如分析首部、提取数据、差错检验或查找路由)所花费的时间
排队时延(queueing delay): 分组在路由器输入输出队列中排队等待处理所经历的时延



时延带宽积
时延带宽积 = 传播时延 x 带宽，即按比特计数的链路长度
若发送端连续发送数据，则在发送的第一个bit即将达到终点时，发送端就已经发送了时延
带宽积个bit，而这些bit都在链路上向前移动

类比体积



